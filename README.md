# usingThread
.NET에서 멀티스레딩 처리하다가 기록




### 기존 배경지식
프로그램은 저장소에 있는 파일이며, 이것을 실행시키면 프로세스가 돌아간다.
같은 프로그램이어도 여러번 실행시키면 프로세스가 여러개 실행되며 이를 __다중 프로그래밍__ 혹은 __멀티태스킹__ 이라고 한다.
여기서 실행되고 있는 프로그램 그러니까 프로세스 내에서 처리되고 있는 실행 단위를 __스레드__ 라고 한다.

/*
  일반적으로 CPU 3코어 6스레드라고 할경우, 1코어당 동시에 실행가능한 스레드가 2개라고 보면 된다
  이러한 경우를 인텔에서 하이퍼 스레딩이라고 명칭
*/




## 멀티스레딩
스레드 여러개 돌리는 것


1. 동시성
  : 싱글코어에서 멀티스레딩하는 것
  (1) 동기식으로 돌릴 것인가
  (2) 비동기식으로 돌릴 것인가
  

2. 병렬성
  : 하드웨어가 지원해주어야 한다.
  : 여러코어이거나 하이퍼스레딩인 경우를 의미
  

→ 당연한 얘기지만 21세기에 동시성 컴퓨터는 없다.
  논리적으로 표현할 때만 쓰일 뿐... ( EX. 클래스 코드 작성 등)
  우리가 쓰는 것들은 전부 병렬성 비동기식이다.
  


##.NET에서 멀티스레딩 처리
결론부터 말하자면
장기간 실행되는 작업에는 thread class가 다른 비동기 작업에는 task가 우선시되면 좋으다.


1. Thread class
: O.S(Windows)단에서 스레드를 만들고 조작한다. 그래서 많은 제어기능이 있지만 스레드관리가 어렵다.
  (1) thread 클래스를 이용하는 동안, 한번에 하나의 작업만 돌릴 수 있음
      → 'await'나 'async'를 이용하여 비동기 작업을 구현할 수 있음(물론 해당 기능들을 위한 별도 스레드 처리 하지 않음)
  (2) cancellation token없음
  (3) thread pool thread 처리 안함
  (4) Resource 사용
  
  
  
2. Task class
: 사실상 System.Threading.namespace를 써주지만 클래스는 다른 작용한다.
  thread 기능의 한단계 하이레벨 기능 즉, 작업 병렬 라이브러리 일부이다.
  (1) 동시에 여러 프로세스를 돌릴 수 있다
      → 비동기 작업을 실행
  (2) calcellation token 사용
  (3) thread pool thread처리한다. 작업을 스케쥴링하는 TaskScheduler로 사용
  (4) Resource 사용하지 않는다














